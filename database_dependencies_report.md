# Database Dependencies Report
# Generated on: 2025-07-02 23:19:29
# This file contains all database objects and dependencies found in the schema

## SUMMARY
Total Schemas: 6
Total Types: 10
Total Functions: 131
Total Tables: 197
Total Triggers: 0
Total Views: 0
Total Sequences: 0
Total Indexes: 373
Total Constraints: 0
Total Policies: 417
Total Extensions: 0
Total Comments: 46
Total Grants: 1

## DETAILED BREAKDOWN

### 1. SCHEMAS (6)
- auth
- extensions
- graphql_public
- public
- realtime
- storage

### 2. TYPES (10)
- auth.aal_level
- auth.code_challenge_method
- auth.factor_status
- auth.factor_type
- auth.one_time_token_type
- realtime.action
- realtime.equality_op
- realtime.user_defined_filter
- realtime.wal_column
- realtime.wal_rls

### 3. FUNCTIONS (131)
- auth.email
- auth.jwt
- auth.role
- auth.uid
- extensions.grant_pg_cron_access
- extensions.grant_pg_graphql_access
- extensions.grant_pg_net_access
- extensions.pgrst_ddl_watch
- extensions.pgrst_drop_watch
- extensions.set_graphql_placeholder
- public.compute_similar_books
- public.count_authors_per_book
- public.count_books_with_multiple_authors
- public.count_publishers_per_book
- public.create_author_activity
- public.create_book_activity
- public.create_book_club_event
- public.create_book_update_activity
- public.create_challenge_complete_notification
- public.create_default_reading_lists
- public.create_discussion_activity
- public.create_discussion_comment_activity
- public.create_event_activity
- public.create_event_approval_record
- public.create_event_notification
- public.create_event_registration_activity
- public.create_follow_notification
- public.create_get_user_reading_stats_function
- public.create_group_activity
- public.create_group_with_roles
- public.create_list_follow_notification
- public.create_list_item_activity
- public.create_new_user
- public.create_or_update_user
- public.create_publisher_activity
- public.create_reading_list_activity
- public.create_reading_progress_activity
- public.create_review_activity
- public.create_review_like_notification
- public.create_user_profile_activity
- public.create_want_to_read_review_notification
- public.export_schema_definitions
- public.generate_personalized_recommendations
- public.generate_recommendations
- public.get_column_names
- public.get_search_suggestions
- public.get_table_columns
- public.get_user_reading_stats
- public.handle_new_user
- public.handle_new_user_profile
- public.increment_album_view_count
- public.initialize_group_member_count
- public.integer_to_uuid
- public.integer_to_uuid
- public.is_admin
- public.is_admin_safe
- public.is_group_owner
- public.is_super_admin
- public.manage_series_event_number
- public.manage_waitlist_position
- public.mark_all_notifications_read
- public.notify_author_followers_of_event
- public.notify_challenge_completion
- public.notify_challenge_lead
- public.notify_waitlist_when_ticket_available
- public.prevent_spam_posts
- public.record_book_view
- public.record_user_book_interaction
- public.search_all
- public.search_books
- public.search_reading_lists
- public.search_users
- public.sync_book_author
- public.track_book_view
- public.track_event_view
- public.update_album_updated_at
- public.update_author_activity
- public.update_book_club_member_count
- public.update_book_rating
- public.update_book_rating_from_reviews
- public.update_contact_info_updated_at
- public.update_daily_stats_from_progress
- public.update_daily_stats_from_session
- public.update_event_financials
- public.update_event_status
- public.update_feed_entry_updated_at
- public.update_follow_counts
- public.update_group_activity
- public.update_group_member_count
- public.update_image_updated_at
- public.update_modified_column
- public.update_publisher_activity
- public.update_publishers_updated_at
- public.update_reading_challenge
- public.update_reading_goals
- public.update_reading_streaks
- public.update_streak_goals
- public.update_ticket_quantity_sold
- public.update_timestamp
- public.update_updated_at_column
- public.update_user_profile_activity
- public.update_user_recommendations
- public.validate_book_data
- public.validate_chat_message
- public.validate_event_creation
- public.validate_follow_target
- public.validate_livestream_activation
- public.validate_survey_response
- public.validate_ticket_purchase
- realtime.apply_rls
- realtime.broadcast_changes
- realtime.build_prepared_statement_sql
- realtime.cast
- realtime.check_equality_op
- realtime.is_visible_through_filters
- realtime.list_changes
- realtime.quote_wal2json
- realtime.send
- realtime.subscription_check_filters
- realtime.to_regrole
- realtime.topic
- storage.can_insert_object
- storage.extension
- storage.filename
- storage.foldername
- storage.get_size_by_bucket
- storage.list_multipart_uploads_with_delimiter
- storage.list_objects_with_delimiter
- storage.operation
- storage.search
- storage.update_updated_at_column

### 4. TABLES (197)
- auth.audit_log_entries
- auth.flow_state
- auth.identities
- auth.instances
- auth.mfa_amr_claims
- auth.mfa_challenges
- auth.mfa_factors
- auth.one_time_tokens
- auth.refresh_tokens
- auth.saml_providers
- auth.saml_relay_states
- auth.schema_migrations
- auth.sessions
- auth.sso_domains
- auth.sso_providers
- auth.users
- public.activities
- public.activity_log
- public.album_analytics
- public.album_images
- public.album_shares
- public.authors
- public.binding_types
- public.blocks
- public.book_authors
- public.book_club_books
- public.book_club_discussion_comments
- public.book_club_discussions
- public.book_club_members
- public.book_clubs
- public.book_genre_mappings
- public.book_genres
- public.book_id_mapping
- public.book_publishers
- public.book_recommendations
- public.book_reviews
- public.book_similarity_scores
- public.book_subjects
- public.book_tag_mappings
- public.book_tags
- public.book_views
- public.books
- public.carousel_images
- public.comments
- public.contact_info
- public.countries
- public.discussion_comments
- public.discussions
- public.event_analytics
- public.event_approvals
- public.event_books
- public.event_calendar_exports
- public.event_categories
- public.event_chat_messages
- public.event_chat_rooms
- public.event_comments
- public.event_creator_permissions
- public.event_financials
- public.event_interests
- public.event_likes
- public.event_livestreams
- public.event_locations
- public.event_media
- public.event_permission_requests
- public.event_questions
- public.event_registrations
- public.event_reminders
- public.event_sessions
- public.event_shares
- public.event_speakers
- public.event_sponsors
- public.event_staff
- public.event_surveys
- public.event_tags
- public.event_types
- public.event_views
- public.event_waitlists
- public.events
- public.feed_entries
- public.feed_entry_tags
- public.follow_target_types
- public.follows
- public.format_types
- public.friends
- public.group_achievements
- public.group_analytics
- public.group_announcements
- public.group_audit_log
- public.group_author_events
- public.group_book_list_items
- public.group_book_lists
- public.group_book_reviews
- public.group_book_swaps
- public.group_book_wishlist_items
- public.group_book_wishlists
- public.group_bots
- public.group_chat_channels
- public.group_chat_message_attachments
- public.group_chat_message_reactions
- public.group_chat_messages
- public.group_content_moderation_logs
- public.group_custom_fields
- public.group_discussion_categories
- public.group_event_feedback
- public.group_events
- public.group_integrations
- public.group_invites
- public.group_leaderboards
- public.group_member_achievements
- public.group_member_devices
- public.group_member_streaks
- public.group_members
- public.group_membership_questions
- public.group_moderation_logs
- public.group_onboarding_checklists
- public.group_onboarding_progress
- public.group_onboarding_tasks
- public.group_poll_votes
- public.group_polls
- public.group_reading_challenge_progress
- public.group_reading_challenges
- public.group_reading_progress
- public.group_reading_sessions
- public.group_reports
- public.group_roles
- public.group_rules
- public.group_shared_documents
- public.group_tags
- public.group_types
- public.group_webhook_logs
- public.group_webhooks
- public.group_welcome_messages
- public.groups
- public.id_mappings
- public.image_tag_mappings
- public.image_tags
- public.image_types
- public.images
- public.invoices
- public.likes
- public.list_followers
- public.media_attachments
- public.mentions
- public.notifications
- public.payment_methods
- public.payment_transactions
- public.personalized_recommendations
- public.photo_album
- public.photo_albums
- public.posts
- public.prices
- public.profiles
- public.promo_codes
- public.publishers
- public.reactions
- public.reading_challenges
- public.reading_goals
- public.reading_list_items
- public.reading_lists
- public.reading_progress
- public.reading_series
- public.reading_sessions
- public.reading_stats_daily
- public.reading_streaks
- public.review_likes
- public.reviews
- public.roles
- public.series_events
- public.session_registrations
- public.similar_books
- public.statuses
- public.subjects
- public.survey_questions
- public.survey_responses
- public.sync_state
- public.tags
- public.ticket_benefits
- public.ticket_types
- public.tickets
- public.user_book_interactions
- public.user_reading_preferences
- public.users
- realtime.messages
- realtime.messages_2025_05_28
- realtime.messages_2025_05_29
- realtime.messages_2025_05_30
- realtime.messages_2025_05_31
- realtime.messages_2025_06_01
- realtime.messages_2025_06_02
- realtime.messages_2025_06_03
- realtime.schema_migrations
- realtime.subscription
- storage.buckets
- storage.migrations
- storage.objects
- storage.s3_multipart_uploads
- storage.s3_multipart_uploads_parts

### 5. TRIGGERS (0)

### 6. VIEWS (0)

### 7. SEQUENCES (0)

### 8. INDEXES (373)
- audit_logs_instance_id_idx
- factor_id_created_at_idx
- flow_state_created_at_idx
- identities_email_idx
- identities_user_id_idx
- idx_activities_author_id
- idx_activities_event_id
- idx_activities_group_id
- idx_activities_user_profile_id
- idx_album_analytics_date
- idx_album_images_cover
- idx_album_images_featured
- idx_album_images_order
- idx_album_shares_expires
- idx_album_shares_token
- idx_auth_code
- idx_authors_featured
- idx_authors_name
- idx_book_discussions_user_id
- idx_book_genres_name
- idx_book_reviews_group_id
- idx_book_reviews_visibility
- idx_book_tags_name
- idx_books_author
- idx_books_author_date
- idx_books_author_id
- idx_books_author_trgm
- idx_books_average_rating
- idx_books_binding_type_id
- idx_books_cover_image_id
- idx_books_created_at
- idx_books_featured
- idx_books_format_type_id
- idx_books_isbn10
- idx_books_isbn13
- idx_books_overview_trgm
- idx_books_publication_date
- idx_books_publisher_date
- idx_books_publisher_id
- idx_books_rating_reviews
- idx_books_review_count
- idx_books_synopsis_trgm
- idx_books_title
- idx_books_title_author
- idx_books_title_trgm
- idx_contact_info_new_entity
- idx_countries_code
- idx_countries_name
- idx_discussion_comments_discussion_id
- idx_discussion_comments_user_id
- idx_event_analytics_date
- idx_event_analytics_event_id
- idx_event_approvals_approval_status
- idx_event_approvals_event_id
- idx_event_books_event_id
- idx_event_calendar_exports_event_id
- idx_event_calendar_exports_user_id
- idx_event_categories_parent_id
- idx_event_chat_messages_chat_room_id
- idx_event_chat_messages_created_at
- idx_event_chat_messages_user_id
- idx_event_chat_rooms_event_id
- idx_event_chat_rooms_is_active
- idx_event_comments_event_id
- idx_event_comments_parent_id
- idx_event_comments_user_id
- idx_event_creator_permissions_user_id
- idx_event_financials_event_id
- idx_event_interests_event_id
- idx_event_interests_user_id
- idx_event_likes_event_id
- idx_event_likes_user_id
- idx_event_livestreams_event_id
- idx_event_livestreams_is_active
- idx_event_locations_event_id
- idx_event_media_event_id
- idx_event_permission_requests_status
- idx_event_permission_requests_user_id
- idx_event_questions_event_id
- idx_event_registrations_event_id
- idx_event_registrations_status
- idx_event_registrations_user_id
- idx_event_reminders_event_id
- idx_event_reminders_reminder_time
- idx_event_reminders_user_id
- idx_event_sessions_event_id
- idx_event_sessions_location_id
- idx_event_shares_event_id
- idx_event_shares_user_id
- idx_event_speakers_event_id
- idx_event_speakers_user_id
- idx_event_sponsors_event_id
- idx_event_sponsors_is_featured
- idx_event_sponsors_sponsor_level
- idx_event_staff_event_id
- idx_event_staff_user_id
- idx_event_surveys_event_id
- idx_event_surveys_is_active
- idx_event_views_event_id
- idx_event_views_user_id
- idx_event_views_viewed_at
- idx_event_waitlists_event_id
- idx_event_waitlists_status
- idx_event_waitlists_ticket_type_id
- idx_event_waitlists_user_id
- idx_events_category_id
- idx_events_created_by
- idx_events_featured
- idx_events_group_id
- idx_events_parent_event_id
- idx_events_slug
- idx_events_start_date
- idx_events_status
- idx_events_type_id
- idx_events_visibility
- idx_feed_entries_content_author_id
- idx_feed_entries_created_at
- idx_feed_entries_group_id
- idx_feed_entries_type
- idx_feed_entries_user_id
- idx_feed_entries_visibility
- idx_follow_target_types_name
- idx_follows_follower_id
- idx_follows_following_id
- idx_friends_friend_id
- idx_friends_status
- idx_friends_user_id
- idx_group_achievements_group_id
- idx_group_achievements_group_id_type
- idx_group_analytics_activity_count
- idx_group_analytics_group_date
- idx_group_analytics_group_id
- idx_group_analytics_group_metric
- idx_group_analytics_member_count
- idx_group_analytics_metric_name
- idx_group_analytics_post_count
- idx_group_analytics_recorded_at
- idx_group_announcements_group_id
- idx_group_audit_log_group_id
- idx_group_book_lists_group_id
- idx_group_book_reviews_new_book_id
- idx_group_book_reviews_new_book_rating
- idx_group_book_reviews_new_created_at
- idx_group_book_reviews_new_group_book
- idx_group_book_reviews_new_group_id
- idx_group_book_reviews_new_group_user
- idx_group_book_reviews_new_high_ratings
- idx_group_book_reviews_new_low_ratings
- idx_group_book_reviews_new_rating
- idx_group_book_reviews_new_user_id
- idx_group_book_reviews_new_with_reviews
- idx_group_book_swaps_accepted_at
- idx_group_book_swaps_accepted_by
- idx_group_book_swaps_accepted_pending
- idx_group_book_swaps_available
- idx_group_book_swaps_book_id
- idx_group_book_swaps_cancelled_expired
- idx_group_book_swaps_completed
- idx_group_book_swaps_created_at
- idx_group_book_swaps_group_book
- idx_group_book_swaps_group_id
- idx_group_book_swaps_group_offered
- idx_group_book_swaps_group_status
- idx_group_book_swaps_offered_by
- idx_group_book_swaps_status
- idx_group_book_wishlists_group_id
- idx_group_chat_channels_group_id
- idx_group_chat_messages_channel_id
- idx_group_discussion_categories_created_at
- idx_group_discussion_categories_group_id
- idx_group_discussion_categories_group_name
- idx_group_discussion_categories_name
- idx_group_discussion_categories_name_lower
- idx_group_discussion_categories_updated_at
- idx_group_discussion_categories_with_description
- idx_group_event_feedback_event_id
- idx_group_events_group_id
- idx_group_member_achievements_achievement_analysis
- idx_group_member_achievements_achievement_id
- idx_group_member_achievements_created_at
- idx_group_member_achievements_earned_at
- idx_group_member_achievements_group_user
- idx_group_member_achievements_user_id
- idx_group_membership_questions_analysis
- idx_group_membership_questions_created_at
- idx_group_membership_questions_group_id
- idx_group_membership_questions_is_required
- idx_group_membership_questions_updated_at
- idx_group_reading_progress_group_id
- idx_group_roles_analysis
- idx_group_roles_created_at
- idx_group_roles_group_id
- idx_group_roles_is_default
- idx_group_roles_name
- idx_group_roles_permissions
- idx_group_roles_updated_at
- idx_group_rules_analysis
- idx_group_rules_created_at
- idx_group_rules_group_id
- idx_group_rules_order_index
- idx_group_rules_ordering
- idx_group_rules_updated_at
- idx_group_tags_analysis
- idx_group_tags_created_at
- idx_group_tags_description_search
- idx_group_tags_group_id
- idx_group_tags_name
- idx_group_tags_name_search
- idx_group_tags_updated_at
- idx_group_types_display_name
- idx_group_types_display_name_search
- idx_group_types_lookup
- idx_group_types_slug
- idx_group_types_slug_search
- idx_id_mappings_new_id
- idx_image_tags_slug
- idx_image_types_name
- idx_images_deleted
- idx_images_id
- idx_images_processed
- idx_images_storage
- idx_invoices_event_id
- idx_invoices_invoice_number
- idx_invoices_registration_id
- idx_invoices_status
- idx_invoices_user_id
- idx_media_attachments_feed_entry_id
- idx_mentions_mentioned_user_id
- idx_multipart_uploads_list
- idx_objects_bucket_id_name
- idx_payment_methods_payment_type
- idx_payment_methods_user_id
- idx_payment_transactions_event_id
- idx_payment_transactions_registration_id
- idx_payment_transactions_status
- idx_payment_transactions_transaction_type
- idx_payment_transactions_user_id
- idx_photo_albums_deleted
- idx_photo_albums_entity
- idx_photo_albums_owner
- idx_photo_albums_public
- idx_photo_albums_type
- idx_prices_analysis
- idx_prices_book_id
- idx_prices_condition
- idx_prices_condition_analysis
- idx_prices_created_at
- idx_prices_currency
- idx_prices_currency_analysis
- idx_prices_merchant
- idx_prices_merchant_analysis
- idx_prices_price
- idx_prices_updated_at
- idx_profiles_analysis
- idx_profiles_bio_search
- idx_profiles_created_at
- idx_profiles_role
- idx_profiles_updated_at
- idx_profiles_user_id
- idx_promo_codes_code
- idx_promo_codes_event_id
- idx_promo_codes_is_active
- idx_publishers_created_at
- idx_reactions_feed_entry_id
- idx_reactions_user_id
- idx_reading_lists_description_trgm
- idx_reading_lists_name_trgm
- idx_reading_series_organizer_id
- idx_reading_series_publisher_id
- idx_reading_sessions_new_analysis
- idx_reading_sessions_new_book_analysis
- idx_reading_sessions_new_book_id
- idx_reading_sessions_new_created_at
- idx_reading_sessions_new_end_time
- idx_reading_sessions_new_progress
- idx_reading_sessions_new_start_time
- idx_reading_sessions_new_time_range
- idx_reading_sessions_new_user_id
- idx_reviews_analysis
- idx_reviews_book_id
- idx_reviews_book_user
- idx_reviews_created_at
- idx_reviews_high_ratings
- idx_reviews_low_ratings
- idx_reviews_rating
- idx_reviews_rating_analysis
- idx_reviews_text_search
- idx_reviews_updated_at
- idx_reviews_user_analysis
- idx_reviews_user_id
- idx_reviews_with_text
- idx_series_events_event_id
- idx_series_events_series_id
- idx_session_registrations_session_id
- idx_session_registrations_user_id
- idx_similar_books_bidirectional
- idx_similar_books_book_id
- idx_similar_books_book_similar
- idx_similar_books_created_at
- idx_similar_books_high_similarity
- idx_similar_books_moderate_similarity
- idx_similar_books_no_score
- idx_similar_books_popular
- idx_similar_books_reverse_lookup
- idx_similar_books_score_distribution
- idx_similar_books_similar_book_id
- idx_similar_books_similarity_analysis
- idx_similar_books_similarity_score
- idx_subjects_name
- idx_subjects_parent_id
- idx_survey_questions_survey_id
- idx_survey_responses_registration_id
- idx_survey_responses_survey_id
- idx_survey_responses_user_id
- idx_tags_name
- idx_ticket_benefits_ticket_type_id
- idx_ticket_types_event_id
- idx_ticket_types_is_active
- idx_tickets_event_id
- idx_tickets_registration_id
- idx_tickets_status
- idx_tickets_ticket_number
- idx_tickets_ticket_type_id
- idx_tickets_user_id
- idx_user_book_interactions_book_created
- idx_user_book_interactions_book_id
- idx_user_book_interactions_book_patterns
- idx_user_book_interactions_book_popularity
- idx_user_book_interactions_book_type
- idx_user_book_interactions_book_value
- idx_user_book_interactions_created_at
- idx_user_book_interactions_high_value
- idx_user_book_interactions_interaction_type
- idx_user_book_interactions_likes
- idx_user_book_interactions_purchases
- idx_user_book_interactions_ratings
- idx_user_book_interactions_reviews
- idx_user_book_interactions_type_created
- idx_user_book_interactions_updated_at
- idx_user_book_interactions_user_behavior
- idx_user_book_interactions_user_book
- idx_user_book_interactions_user_created
- idx_user_book_interactions_user_engagement
- idx_user_book_interactions_user_id
- idx_user_book_interactions_user_type
- idx_user_book_interactions_user_value
- idx_user_book_interactions_value
- idx_user_book_interactions_value_analysis
- idx_user_book_interactions_views
- idx_user_id_auth_method
- idx_users_name_trgm
- ix_realtime_subscription_entity
- mfa_challenge_created_at_idx
- mfa_factors_user_id_idx
- name_prefix_search
- one_time_tokens_relates_to_hash_idx
- one_time_tokens_token_hash_hash_idx
- refresh_tokens_instance_id_idx
- refresh_tokens_instance_id_user_id_idx
- refresh_tokens_parent_idx
- refresh_tokens_session_id_revoked_idx
- refresh_tokens_updated_at_idx
- saml_providers_sso_provider_id_idx
- saml_relay_states_created_at_idx
- saml_relay_states_for_email_idx
- saml_relay_states_sso_provider_id_idx
- sessions_not_after_idx
- sessions_user_id_idx
- sso_domains_sso_provider_id_idx
- user_id_created_at_idx
- users_instance_id_email_idx
- users_instance_id_idx
- users_is_anonymous_idx

### 9. CONSTRAINTS (0)

### 10. POLICIES (417)
- public.activities.System can insert activities
- public.activities.user_can_delete_own
- public.activities.user_can_modify_own
- public.activities.user_can_select_own
- public.activity_log.Admins and moderators can view activity log
- public.activity_log.user_can_delete_own
- public.activity_log.user_can_modify_own
- public.activity_log.user_can_select_own
- public.album_analytics.album_owner_can_select
- public.album_images.Album images are viewable by album access
- public.album_images.album_owner_can_delete
- public.album_images.album_owner_can_modify
- public.album_images.album_owner_can_select
- public.album_shares.user_can_delete_own
- public.album_shares.user_can_modify_own
- public.album_shares.user_can_select_own
- public.authors.admin_author_manage
- public.authors.public_author_read
- public.authors.public_read
- public.binding_types.admin_only
- public.binding_types.public_read_reference_tables
- public.binding_types.reference_public_read
- public.blocks.authenticated_users_crud
- public.blocks.blocks_authenticated_crud
- public.blocks.user_can_delete_own
- public.blocks.user_can_modify_own
- public.blocks.user_can_select_own
- public.book_authors.public_read
- public.book_club_books.club_member_can_select
- public.book_club_discussion_comments.Members can view book club discussion comments
- public.book_club_discussion_comments.club_member_can_select
- public.book_club_discussion_comments.creator_can_delete
- public.book_club_discussion_comments.creator_can_modify
- public.book_club_discussions.Members can view book club discussions
- public.book_club_discussions.club_member_can_select
- public.book_club_discussions.creator_can_delete
- public.book_club_discussions.creator_can_modify
- public.book_club_members.club_member_can_select
- public.book_club_members.user_can_modify_own
- public.book_club_members.user_can_select_own
- public.book_clubs.Admins and moderators can update book clubs
- public.book_clubs.Admins can delete book clubs
- public.book_clubs.Members can view private book clubs
- public.book_clubs.Public book clubs are viewable by everyone
- public.book_clubs.club_member_can_select
- public.book_clubs.creator_can_delete
- public.book_clubs.creator_can_modify
- public.book_genre_mappings.public_read
- public.book_genres.public_read
- public.book_genres.public_read_reference_tables
- public.book_genres.reference_public_read
- public.book_id_mapping.public_read
- public.book_publishers.public_read
- public.book_recommendations.Users can view their own recommendations
- public.book_recommendations.user_can_delete_own
- public.book_recommendations.user_can_modify_own
- public.book_recommendations.user_can_select_own
- public.book_reviews.Users can delete their own book reviews
- public.book_reviews.Users can insert their own book reviews
- public.book_reviews.Users can update their own book reviews
- public.book_reviews.Users can view all book reviews
- public.book_reviews.public_read
- public.book_reviews.user_can_delete_own
- public.book_reviews.user_can_modify_own
- public.book_reviews.user_can_select_own
- public.book_similarity_scores.public_read
- public.book_subjects.public_read
- public.book_tag_mappings.public_read
- public.book_tags.public_read
- public.book_views.book_views_owner_access
- public.book_views.book_views_public_read
- public.book_views.owner_access
- public.book_views.user_can_delete_own
- public.book_views.user_can_modify_own
- public.book_views.user_can_select_own
- public.books.admin_book_manage
- public.books.books_admin_delete
- public.books.books_admin_insert
- public.books.books_admin_update
- public.books.books_public_read
- public.books.books_service_role_access
- public.books.public_book_read
- public.books.public_read
- public.carousel_images.public_read
- public.comments.Moderators can hide or delete any comment
- public.comments.authenticated_users_crud
- public.comments.public_read
- public.comments.user_can_delete
- public.comments.user_can_modify
- public.contact_info.Authenticated users can delete contact info
- public.contact_info.Authenticated users can insert contact info
- public.contact_info.Authenticated users can update contact info
- public.contact_info.Authenticated users can view contact info
- public.contact_info.Contact info can be deleted by authenticated users
- public.contact_info.Contact info can be inserted by authenticated users
- public.contact_info.Contact info can be updated by authenticated users
- public.contact_info.Contact info is viewable by authenticated users
- public.contact_info.entity_owner_can_modify
- public.contact_info.entity_owner_can_select
- public.countries.public_read
- public.countries.public_read_reference_tables
- public.countries.reference_public_read
- public.discussion_comments.Anyone can read discussion comments
- public.discussion_comments.Authenticated users can create discussion comments
- public.discussion_comments.Users can delete their own discussion comments
- public.discussion_comments.Users can update their own discussion comments
- public.discussions.Anyone can read book discussions
- public.discussions.Authenticated users can create book discussions
- public.discussions.Users can delete their own book discussions
- public.discussions.Users can update their own book discussions
- public.event_analytics.event_participant_can_select
- public.event_approvals.admin_can_select
- public.event_approvals.event_creator_can_select
- public.event_books.event_participant_can_select
- public.event_calendar_exports.user_can_delete_own
- public.event_calendar_exports.user_can_modify_own
- public.event_calendar_exports.user_can_select_own
- public.event_categories.public_read
- public.event_categories.public_read_reference_tables
- public.event_categories.reference_public_read
- public.event_chat_messages.chat_room_participant_can_select
- public.event_chat_messages.user_can_delete
- public.event_chat_messages.user_can_modify
- public.event_chat_rooms.event_participant_can_select
- public.event_comments.event_participant_can_select
- public.event_comments.user_can_delete
- public.event_comments.user_can_modify
- public.event_creator_permissions.user_can_modify_own
- public.event_creator_permissions.user_can_select_own
- public.event_financials.admin_can_select
- public.event_financials.event_creator_can_select
- public.event_interests.event_participant_can_select
- public.event_interests.user_can_delete_own
- public.event_interests.user_can_modify_own
- public.event_interests.user_can_select_own
- public.event_likes.event_participant_can_select
- public.event_likes.user_can_delete_own
- public.event_likes.user_can_select_own
- public.event_livestreams.event_participant_can_select
- public.event_locations.event_participant_can_select
- public.event_media.event_participant_can_select
- public.event_permission_requests.admin_can_select
- public.event_permission_requests.user_can_modify_own
- public.event_permission_requests.user_can_select_own
- public.event_questions.event_participant_can_select
- public.event_registrations.event_creator_can_select
- public.event_registrations.user_can_modify_own
- public.event_registrations.user_can_select_own
- public.event_reminders.user_can_delete_own
- public.event_reminders.user_can_modify_own
- public.event_reminders.user_can_select_own
- public.event_sessions.event_participant_can_select
- public.event_shares.user_can_delete_own
- public.event_shares.user_can_modify_own
- public.event_shares.user_can_select_own
- public.event_speakers.event_participant_can_select
- public.event_speakers.speaker_can_modify_own
- public.event_speakers.speaker_can_select_own
- public.event_sponsors.event_participant_can_select
- public.event_staff.event_participant_can_select
- public.event_staff.staff_can_modify_own
- public.event_staff.staff_can_select_own
- public.event_surveys.event_participant_can_select
- public.event_tags.event_participant_can_select
- public.event_types.public_read
- public.event_types.public_read_reference_tables
- public.event_types.reference_public_read
- public.event_views.event_participant_can_select
- public.event_views.user_can_select_own
- public.event_waitlists.event_creator_can_select
- public.event_waitlists.user_can_delete_own
- public.event_waitlists.user_can_modify_own
- public.event_waitlists.user_can_select_own
- public.events.event_owner_manage
- public.events.public_event_read
- public.feed_entries.Admins can do anything
- public.feed_entries.Allow private timeline entries to allowed users
- public.feed_entries.Allow public timeline entries
- public.feed_entries.Blocked users cannot see my entries
- public.feed_entries.Custom allowed users can see entry
- public.feed_entries.Friends can see friends-only entries
- public.feed_entries.Only show non-deleted, non-hidden entries
- public.feed_entries.Owner can do anything
- public.feed_entries.Public entries are visible
- public.feed_entry_tags.Select tags for visible feed entries
- public.feed_entry_tags.Users can delete tags for their own feed entries
- public.feed_entry_tags.Users can insert tags for their own feed entries
- public.follow_target_types.public_read_reference_tables
- public.follows.authenticated_users_crud
- public.follows.follows_authenticated_crud
- public.format_types.public_read_reference_tables
- public.format_types.reference_public_read
- public.friends.Users can delete their own friendships
- public.friends.Users can send friend requests
- public.friends.Users can update their own friendships
- public.friends.Users can view their own friendships
- public.group_achievements.group_member_can_select
- public.group_analytics.group_member_can_select
- public.group_announcements.creator_can_delete
- public.group_announcements.creator_can_modify
- public.group_announcements.group_member_can_select
- public.group_audit_log.admin_can_select
- public.group_author_events.group_member_can_select
- public.group_book_list_items.added_by_can_delete
- public.group_book_list_items.added_by_can_modify
- public.group_book_list_items.list_member_can_select
- public.group_book_lists.creator_can_delete
- public.group_book_lists.creator_can_modify
- public.group_book_lists.group_member_can_select
- public.group_book_reviews.group_member_can_select
- public.group_book_reviews.user_can_delete
- public.group_book_reviews.user_can_modify
- public.group_book_swaps.group_member_can_select
- public.group_book_swaps.offered_by_can_delete
- public.group_book_swaps.offered_by_can_modify
- public.group_book_wishlist_items.added_by_can_delete
- public.group_book_wishlist_items.added_by_can_modify
- public.group_book_wishlist_items.wishlist_member_can_select
- public.group_book_wishlists.creator_can_delete
- public.group_book_wishlists.creator_can_modify
- public.group_book_wishlists.group_member_can_select
- public.group_bots.group_member_can_select
- public.group_chat_channels.group_member_can_select
- public.group_chat_message_attachments.chat_member_can_select
- public.group_chat_message_reactions.chat_member_can_select
- public.group_chat_message_reactions.user_can_delete
- public.group_chat_message_reactions.user_can_modify
- public.group_chat_messages.chat_member_can_select
- public.group_chat_messages.user_can_delete
- public.group_chat_messages.user_can_modify
- public.group_content_moderation_logs.admin_can_select
- public.group_custom_fields.group_member_can_select
- public.group_discussion_categories.group_member_can_select
- public.group_event_feedback.group_member_can_select
- public.group_event_feedback.user_can_delete
- public.group_event_feedback.user_can_modify
- public.group_events.group_member_access
- public.group_events.group_member_can_select
- public.group_integrations.group_member_can_select
- public.group_invites.group_member_can_select
- public.group_invites.invited_user_can_select
- public.group_invites.invited_user_can_update
- public.group_leaderboards.group_member_can_select
- public.group_member_achievements.group_member_can_select
- public.group_member_achievements.user_can_select_own
- public.group_member_devices.user_can_delete_own
- public.group_member_devices.user_can_modify_own
- public.group_member_devices.user_can_select_own
- public.group_member_streaks.group_member_can_select
- public.group_member_streaks.user_can_select_own
- public.group_members.Group members are viewable by everyone
- public.group_members.Users can join public groups
- public.group_members.group_member_can_select
- public.group_members.user_can_select_own
- public.group_members.user_can_update_own
- public.group_membership_questions.group_member_can_select
- public.group_moderation_logs.admin_can_select
- public.group_onboarding_checklists.group_member_can_select
- public.group_onboarding_progress.checklist_member_can_select
- public.group_onboarding_progress.user_can_modify_own
- public.group_onboarding_progress.user_can_select_own
- public.group_onboarding_tasks.checklist_member_can_select
- public.group_poll_votes.poll_member_can_select
- public.group_poll_votes.user_can_delete_own
- public.group_poll_votes.user_can_modify_own
- public.group_poll_votes.user_can_select_own
- public.group_polls.creator_can_delete
- public.group_polls.creator_can_modify
- public.group_polls.group_member_can_select
- public.group_reading_challenge_progress.challenge_member_can_select
- public.group_reading_challenge_progress.user_can_modify_own
- public.group_reading_challenge_progress.user_can_select_own
- public.group_reading_challenges.creator_can_delete
- public.group_reading_challenges.creator_can_modify
- public.group_reading_challenges.group_member_can_select
- public.group_reading_progress.group_member_can_select
- public.group_reading_progress.user_can_modify_own
- public.group_reading_progress.user_can_select_own
- public.group_reading_sessions.creator_can_delete
- public.group_reading_sessions.creator_can_modify
- public.group_reading_sessions.group_member_can_select
- public.group_reports.group_member_can_select
- public.group_reports.reporter_can_modify
- public.group_reports.reporter_can_select
- public.group_roles.group_member_can_select
- public.group_rules.group_member_can_select
- public.group_shared_documents.group_member_can_select
- public.group_tags.group_member_can_select
- public.group_types.public_read
- public.group_webhook_logs.group_member_can_select
- public.group_webhooks.group_member_can_select
- public.group_welcome_messages.group_member_can_select
- public.groups.Groups are viewable by everyone
- public.groups.Users can create groups
- public.id_mappings.admin_only
- public.image_tag_mappings.public_read
- public.image_tags.public_read
- public.image_types.public_read_reference_tables
- public.image_types.reference_public_read
- public.images.images_delete_policy
- public.images.images_insert_policy
- public.images.images_select_policy
- public.images.images_update_policy
- public.invoices.invoices_owner_access
- public.invoices.owner_access
- public.likes.authenticated_users_crud
- public.likes.likes_authenticated_crud
- public.list_followers.Users can delete their own list follows
- public.list_followers.Users can insert their own list follows
- public.list_followers.Users can view all list followers
- public.media_attachments.Select media for visible feed entries
- public.media_attachments.Users can delete media for their own feed entries
- public.media_attachments.Users can insert media for their own feed entries
- public.mentions.Users can delete mentions they created
- public.mentions.Users can insert mentions
- public.mentions.Users can see their own mentions
- public.notifications.Users can see their own notifications
- public.notifications.Users can update their own notifications
- public.notifications.Users can view their own notifications
- public.payment_methods.owner_access
- public.payment_methods.payment_methods_owner_access
- public.payment_methods.user_can_delete_own
- public.payment_methods.user_can_modify_own
- public.payment_methods.user_can_select_own
- public.payment_transactions.admin_can_select
- public.payment_transactions.event_creator_can_select
- public.payment_transactions.owner_access
- public.payment_transactions.payment_transactions_owner_access
- public.payment_transactions.user_can_select_own
- public.personalized_recommendations.Users can update their own recommendations
- public.personalized_recommendations.Users can view their own recommendations
- public.photo_album.owner_access
- public.photo_album.photo_album_owner_access
- public.photo_album.photo_album_public_read
- public.photo_albums.Public albums are viewable by everyone
- public.photo_albums.Users can create their own albums
- public.photo_albums.Users can delete their own albums
- public.photo_albums.Users can update their own albums
- public.photo_albums.Users can view their own albums
- public.posts.authenticated_users_crud
- public.posts.posts_authenticated_crud
- public.prices.public_read
- public.profiles.owner_access
- public.profiles.profiles_owner_access
- public.profiles.profiles_public_read
- public.promo_codes.creator_can_delete
- public.promo_codes.creator_can_modify
- public.promo_codes.event_creator_can_select
- public.publishers.admin_publisher_manage
- public.publishers.public_publisher_read
- public.reactions.Select reactions for visible feed entries
- public.reactions.Users can delete their own reactions
- public.reactions.Users can insert their own reactions
- public.reading_challenges.Users can insert their own reading challenges
- public.reading_challenges.Users can update their own reading challenges
- public.reading_challenges.Users can view their own reading challenges
- public.reading_goals.Users can delete their own reading goals
- public.reading_goals.Users can insert their own reading goals
- public.reading_goals.Users can update their own reading goals
- public.reading_goals.Users can view their own reading goals
- public.reading_list_items.Users can delete items from their own lists
- public.reading_list_items.Users can insert items into their own lists
- public.reading_list_items.Users can update items in their own lists
- public.reading_list_items.Users can view items in public lists or their own lists
- public.reading_lists.Users can delete their own reading lists
- public.reading_lists.Users can insert their own reading lists
- public.reading_lists.Users can update their own reading lists
- public.reading_lists.Users can view public reading lists
- public.reading_progress.Users can insert their own reading progress
- public.reading_progress.Users can update their own reading progress
- public.reading_progress.Users can view their own reading progress
- public.reading_series.organizer_can_delete
- public.reading_series.organizer_can_modify
- public.reading_series.public_read
- public.reading_sessions.authenticated_users_crud
- public.reading_stats_daily.Users can view their own daily stats
- public.reading_streaks.Users can view their own reading streaks
- public.review_likes.Users can delete their own likes
- public.review_likes.Users can insert their own likes
- public.review_likes.Users can view all review likes
- public.reviews.authenticated_users_crud
- public.reviews.reviews_authenticated_crud
- public.roles.public_read_reference_tables
- public.roles.reference_public_read
- public.series_events.public_read
- public.session_registrations.user_can_delete_own
- public.session_registrations.user_can_modify_own
- public.session_registrations.user_can_select_own
- public.similar_books.public_read
- public.statuses.public_read_reference_tables
- public.statuses.reference_public_read
- public.subjects.public_read_reference_tables
- public.subjects.reference_public_read
- public.survey_questions.public_read
- public.survey_responses.user_can_delete_own
- public.survey_responses.user_can_modify_own
- public.survey_responses.user_can_select_own
- public.sync_state.admin_only
- public.tags.public_read_reference_tables
- public.tags.reference_public_read
- public.ticket_benefits.public_read
- public.ticket_types.public_read
- public.tickets.owner_access
- public.tickets.tickets_owner_access
- public.user_book_interactions.Users can insert their own interactions
- public.user_book_interactions.Users can update their own interactions
- public.user_book_interactions.Users can view their own interactions
- public.user_reading_preferences.Users can insert their own preferences
- public.user_reading_preferences.Users can update their own preferences
- public.user_reading_preferences.Users can view their own preferences
- public.users.Admins can do anything
- public.users.Authenticated users can view other users' basic info
- public.users.Enable insert access for all users
- public.users.Service role has full access
- public.users.Users can update own data
- public.users.Users can view own data
- public.users.public_select_users

### 11. EXTENSIONS (0)

### 12. COMMENTS (46)
- COLUMN auth.identities
- COLUMN auth.sessions
- COLUMN auth.sso_providers
- COLUMN auth.users
- COLUMN public.activities
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.books
- COLUMN public.publishers
- COLUMN public.publishers
- COLUMN storage.buckets
- COLUMN storage.objects
- FUNCTION auth.email
- FUNCTION auth.role
- FUNCTION auth.uid
- FUNCTION extensions.grant_pg_cron_access
- FUNCTION extensions.grant_pg_graphql_access
- FUNCTION extensions.grant_pg_net_access
- FUNCTION extensions.set_graphql_placeholder
- TABLE auth.audit_log_entries
- TABLE auth.flow_state
- TABLE auth.identities
- TABLE auth.instances
- TABLE auth.mfa_amr_claims
- TABLE auth.mfa_challenges
- TABLE auth.mfa_factors
- TABLE auth.refresh_tokens
- TABLE auth.saml_providers
- TABLE auth.saml_relay_states
- TABLE auth.schema_migrations
- TABLE auth.sessions
- TABLE auth.sso_domains
- TABLE auth.sso_providers
- TABLE auth.users
- TABLE public.activities
- TABLE public.books
- TABLE public.users

### 13. GRANTS (1)
- USAGE ON SCHEMA net TO supabase_functions_admin, postgres, anon, authenticated, service_role;

    IF EXISTS (
      SELECT FROM pg_extension
      WHERE extname = 'pg_net'
      -- all versions in use on existing projects as of 2025-02-20
      -- version 0.12.0 onwards don't need these applied
      AND extversion IN ('0.2', '0.6', '0.7', '0.7.1', '0.8', '0.10.0', '0.11.0')
    ) THEN
      ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;
      ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;

      ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;
      ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;

      REVOKE ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;
      REVOKE ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;

      GRANT EXECUTE ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
      GRANT EXECUTE ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
    END IF;
  END IF;
END;
$$;


ALTER FUNCTION 

## DEPENDENCY ORDER RECOMMENDATION

### Phase 1: Core Infrastructure
1. Extensions (if any)
2. Schemas
3. Types (ENUMs and composite types)

### Phase 2: Base Objects
4. Sequences
5. Tables
6. Views

### Phase 3: Relationships and Constraints
7. Indexes
8. Constraints (Primary Keys, Foreign Keys, etc.)
9. Policies (RLS)

### Phase 4: Logic and Automation
10. Functions
11. Triggers

### Phase 5: Documentation and Permissions
12. Comments
13. Grants

## NOTES
- This analysis is based on the schema dump file
- Some dependencies may have interdependencies not captured here
- Always test the restoration order in a development environment first
- Consider using pg_dump with --schema-only for a cleaner extraction
